#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'Running Git Hooks'

echo "ğŸ” Checking validity of types with TypeScript"

pnpm type-check || (
    "\nâ›”ï¸ There is a type error in the code, fix it, and try commit again. â›”ï¸";
    false;
    )


echo "\nâœ… No TypeError found"
echo "\nğŸ” Running linter.."

pnpm lint || (
    echo '\nâ›”ï¸ There is a problem in the code. âŒ›ï¸ I run linter autofix for you.';

    echo '\nğŸ” Running linter autofix..'
    pnpm lint:fix || (
      echo '\nâ›”ï¸ Autofix failed. Please fix the linting errors manually. â›”ï¸';
      false;
    )

    echo '\nğŸ§ Please check the changes and commit again.\n'
    false;
    )

echo 'âœ… No Eslint error found'
echo 'âŒ›ï¸ Running lint staged and git commit âŒ›ï¸'

npx lint-staged
